// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id               String             @id @default(cuid())
  name             String
  email            String             @unique
  password         String
  active           Boolean            @default(true)
  createdAt        DateTime           @default(now())
  updatedAt        DateTime           @default(now()) @updatedAt
  MasterUserRole   MasterUserRole     @relation(fields: [masterUserRoleId], references: [id])
  masterUserRoleId Int                @default(3)
  DataDiri         DataDiri?
  AnggotaAfiliatif AnggotaAfiliatif[]
  UserMediaSocial  UserMediaSocial[]
}

model MasterUserRole {
  id        Int      @id @default(autoincrement())
  name      String
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
  User      User[]
}

model AsetPartai {
  id              String   @id @default(cuid())
  name            String
  serialNumber    String   @unique
  pengguna        String
  penanggungJawab String
  harga           Float
  tglPembelian    DateTime
  lokasiPembelian String
  garansi         String
  statusAset      Boolean  @default(true)
  keterangan      String
  kategori        String
  deskripsi       String
  img             String
  createdAt       DateTime @default(now())
  updatedAt       DateTime @default(now()) @updatedAt
}

model DataDiri {
  id                   String             @id @default(cuid())
  nik                  String             @unique
  tempatLahir          String
  tanggalLahir         DateTime
  phoneNumber          String
  alamat               String
  rtRw                 String
  createdAt            DateTime           @default(now())
  updatedAt            DateTime           @default(now()) @updatedAt
  User                 User               @relation(fields: [userId], references: [id])
  userId               String             @unique
  MasterJenisKelamin   MasterJenisKelamin @relation(fields: [masterJenisKelaminId], references: [id])
  masterJenisKelaminId Int
  MasterAgama          MasterAgama        @relation(fields: [masterAgamaId], references: [id])
  masterAgamaId        Int
  MasterPekerjaan      MasterPekerjaan    @relation(fields: [masterPekerjaanId], references: [id])
  masterPekerjaanId    Int
  MasterProvince       MasterProvince     @relation(fields: [masterProvinceId], references: [id])
  masterProvinceId     Int
  MasterKabKot         MasterKabKot       @relation(fields: [masterKabKotId], references: [id])
  masterKabKotId       Int
  MasterKecamatan      MasterKecamatan    @relation(fields: [masterKecamatanId], references: [id])
  masterKecamatanId    Int
  MasterDesa           MasterDesa         @relation(fields: [masterDesaId], references: [id])
  masterDesaId         Int
}

model AnggotaAfiliatif {
  id                          String                    @id @default(cuid())
  createdAt                   DateTime                  @default(now())
  updatedAt                   DateTime                  @default(now()) @updatedAt
  User                        User                      @relation(fields: [userId], references: [id])
  userId                      String
  MasterOrganisasiAfiliatif   MasterOrganisasiAfiliatif @relation(fields: [masterOrganisasiAfiliatifId], references: [id])
  masterOrganisasiAfiliatifId Int
}

model UserMediaSocial {
  id                  String            @id @default(cuid())
  name                String
  link                String
  createdAt           DateTime          @default(now())
  updatedAt           DateTime          @default(now()) @updatedAt
  User                User              @relation(fields: [userId], references: [id])
  userId              String
  MasterMediaSocial   MasterMediaSocial @relation(fields: [masterMediaSocialId], references: [id])
  masterMediaSocialId Int
}

// UMUM
model MasterTingkatPengurus {
  id            Int             @id @default(autoincrement())
  name          String
  createdAt     DateTime        @default(now())
  updatedAt     DateTime        @default(now()) @updatedAt
  MasterJabatan MasterJabatan[]
}

model MasterJabatan {
  id                      Int                    @id @default(autoincrement())
  name                    String
  createdAt               DateTime               @default(now())
  updatedAt               DateTime               @default(now()) @updatedAt
  tingkatPengurusid       MasterTingkatPengurus? @relation(fields: [masterTingkatPengurusId], references: [id])
  masterTingkatPengurusId Int?
}

model MasterAgama {
  id        Int        @id @default(autoincrement())
  name      String
  createdAt DateTime   @default(now())
  updatedAt DateTime   @default(now()) @updatedAt
  DataDiri  DataDiri[]
}

model MasterMediaSocial {
  id              Int               @id @default(autoincrement())
  name            String
  createdAt       DateTime          @default(now())
  updatedAt       DateTime          @default(now()) @updatedAt
  UserMediaSocial UserMediaSocial[]
}

model MasterPekerjaan {
  id        Int        @id @default(autoincrement())
  name      String
  createdAt DateTime   @default(now())
  updatedAt DateTime   @default(now()) @updatedAt
  DataDiri  DataDiri[]
}

model MasterJenisKelamin {
  id        Int        @id @default(autoincrement())
  name      String
  createdAt DateTime   @default(now())
  updatedAt DateTime   @default(now()) @updatedAt
  DataDiri  DataDiri[]
}

// Wilayah
model MasterProvince {
  id           Int            @id @default(autoincrement())
  name         String
  createdAt    DateTime       @default(now())
  updatedAt    DateTime       @default(now()) @updatedAt
  MasterKabKot MasterKabKot[]
  DataDiri     DataDiri[]
  TpsDpt       TpsDpt[]
}

model MasterKabKot {
  id               Int               @id @default(autoincrement())
  name             String
  createdAt        DateTime          @default(now())
  updatedAt        DateTime          @default(now()) @updatedAt
  provinceId       MasterProvince?   @relation(fields: [masterProvinceId], references: [id])
  MasterKecamatan  MasterKecamatan[]
  masterProvinceId Int?
  DataDiri         DataDiri[]
  TpsDpt           TpsDpt[]
}

model MasterKecamatan {
  id             Int           @id @default(autoincrement())
  name           String
  createdAt      DateTime      @default(now())
  updatedAt      DateTime      @default(now()) @updatedAt
  kabkotId       MasterKabKot? @relation(fields: [masterKabKotId], references: [id])
  MasterDesa     MasterDesa[]
  masterKabKotId Int?
  Datadiri       DataDiri[]
  TpsDpt         TpsDpt[]
}

model MasterDesa {
  id                Int              @id @default(autoincrement())
  name              String
  createdAt         DateTime         @default(now())
  updatedAt         DateTime         @default(now()) @updatedAt
  kecamatanId       MasterKecamatan? @relation(fields: [masterKecamatanId], references: [id])
  masterKecamatanId Int?
  DataDiri          DataDiri[]
  TpsDpt            TpsDpt[]
}

model MasterStatusKeanggotaan {
  id        Int      @id @default(autoincrement())
  name      String
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

// STRUKTUR PARTAI
model MasterStrukturPartai {
  id        Int      @id @default(autoincrement())
  name      String
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

model MasterJabatanDewanPembina {
  id        Int      @id @default(autoincrement())
  name      String
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

model MasterJabatanDewanPimpinanPusat {
  id        Int      @id @default(autoincrement())
  name      String
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

model MasterJabatanDewanPimpinanDaerah {
  id        Int      @id @default(autoincrement())
  name      String
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

model MasterJabatanDewanPimpinanCabang {
  id        Int      @id @default(autoincrement())
  name      String
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

model MasterJabatanPimpinanAnakCabang {
  id        Int      @id @default(autoincrement())
  name      String
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

model MasterJabatanPimpinanRanting {
  id        Int      @id @default(autoincrement())
  name      String
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

model MasterJabatanPerwakilanPartaiDiluarNegeri {
  id        Int      @id @default(autoincrement())
  name      String
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

// SAYAP PARTAI
model MasterSayapPartai {
  id        Int      @id @default(autoincrement())
  name      String
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

// KADER PARTAI
model MasterKaderPartai {
  id        Int      @id @default(autoincrement())
  name      String
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

// ANGGOTA AFILIATIF
model MasterOrganisasiAfiliatif {
  id               Int                @id @default(autoincrement())
  name             String
  createdAt        DateTime           @default(now())
  updatedAt        DateTime           @default(now()) @updatedAt
  AnggotaAfiliatif AnggotaAfiliatif[]
}

// ASET PARTAI
model MasterStatusAset {
  id        Int      @id @default(autoincrement())
  name      String
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

model MasterKategoriAset {
  id        Int      @id @default(autoincrement())
  name      String
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

// PETA KEKUATAN
model MasterPartaiPengusung {
  id        Int      @id @default(autoincrement())
  name      String
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

// eksekutif
model MasterTingkatEksekutif {
  id        Int      @id @default(autoincrement())
  name      String
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

model MasterJabatanEksekutifProvinsi {
  id        Int      @id @default(autoincrement())
  name      String
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

model MasterJabatanEksekutifKabKot {
  id        Int      @id @default(autoincrement())
  name      String
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

model MasterJabatanEksekutifKabupaten {
  id        Int      @id @default(autoincrement())
  name      String
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

model MasterJabatanEksekutifKota {
  id        Int      @id @default(autoincrement())
  name      String
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

model MasterStatusEksekutif {
  id        Int      @id @default(autoincrement())
  name      String
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

// legislatif
model MasterTingkatLegislatif {
  id        Int      @id @default(autoincrement())
  name      String
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

//nomor urut TPS
model MasterNomorUrutTPS {
  id        Int      @id @default(autoincrement())
  name      String
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
  TpsDpt    TpsDpt[]
}

//calon pemilih potensial
model MasterCalonPemilihPotensial {
  id        Int      @id @default(autoincrement())
  name      String
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

//AKSI NYATA
model MasterStatusAksiNyata {
  id        Int      @id @default(autoincrement())
  name      String
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

model TpsDpt {
  id                   String             @id @default(cuid())
  MasterProvince       MasterProvince     @relation(fields: [masterProvinceId], references: [id])
  masterProvinceId     Int
  MasterKabKot         MasterKabKot       @relation(fields: [masterKabKotId], references: [id])
  masterKabKotId       Int
  MasterKecamatan      MasterKecamatan    @relation(fields: [masterKecamatanId], references: [id])
  masterKecamatanId    Int
  MasterDesa           MasterDesa         @relation(fields: [masterDesaId], references: [id])
  masterDesaId         Int
  MasterNomorUrutTPS   MasterNomorUrutTPS @relation(fields: [masterNomorUrutTPSId], references: [id])
  masterNomorUrutTPSId Int
  dptLakilaki          Int
  dptPerempuan         Int
  createdAt            DateTime           @default(now())
  updatedAt            DateTime           @default(now()) @updatedAt
}
